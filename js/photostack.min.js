/*!
 * Start Bootstrap - Grayscale v5.0.9 (https://startbootstrap.com/template-overviews/grayscale)
 * Copyright 2013-2019 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-grayscale/blob/master/LICENSE)
 */

!function(r){"use strict";Modernizr.addTest("csstransformspreserve3d",function(){var i,s=Modernizr.prefixed("transformStyle"),t="preserve-3d";return!!s&&(s=s.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()}).replace(/^ms-/,"-ms-"),Modernizr.testStyles("#modernizr{"+s+":"+t+";}",function(t,e){i=r.getComputedStyle?getComputedStyle(t,null).getPropertyValue(s):""}),i===t)});var x=Modernizr.csstransitions,s=Modernizr.csstransformspreserve3d,z={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"}[Modernizr.prefixed("transition")];function i(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function _(t){for(var e=[],i=t.length,s=t[0].length,r=0;r<i;r++)e=e.concat(t[r]);e=function(t){var e,i,s=t.length;for(;s;)i=Math.floor(Math.random()*s--),e=t[s],t[s]=t[i],t[i]=e;return t}(e);for(var n=[],o=0,a=0;a<i;a++){for(var h=[],c=0;c<s;c++)h.push(e[o]),o++;n.push(h)}return n}function t(t,e){this.el=t,this.inner=this.el.querySelector("div"),this.allItems=[].slice.call(this.inner.children),this.allItemsCount=this.allItems.length,this.allItemsCount&&(this.items=[].slice.call(this.inner.querySelectorAll("figure:not([data-dummy])")),this.itemsCount=this.items.length,this.current=0,this.options=i({},this.options),i(this.options,e),this._init())}t.prototype.options={},t.prototype._init=function(){this.currentItem=this.items[this.current],this._addNavigation(),this._getSizes(),this._initEvents()},t.prototype._addNavigation=function(){this.nav=document.createElement("nav");this.nav.innerHTML='<div class="social"><i id="leftNav" class="fas fa-arrow-left"></i><i id="rightNav" class="fas fa-arrow-right"></i></div>',this.el.appendChild(this.nav)},t.prototype._initEvents=function(){var e=this,i=classie.hasClass(this.el,"photostack-start"),s=function(){function t(){x&&classie.addClass(e.el,"photostack-transition")}i?(this.removeEventListener("click",s),classie.removeClass(e.el,"photostack-start"),t()):(e.openDefault=!0,setTimeout(t,25)),e.started=!0,e._showPhoto(e.current),e.startAutoPlay()};i?(this._shuffle(),this.el.addEventListener("click",s)):s(),document.getElementById("leftNav").addEventListener("click",function(){e.setPreviousPhotoIndex();function t(){e._showPhoto(e.current)}e.flipped?e._rotateItem(t):t()}),document.getElementById("rightNav").addEventListener("click",function(){e.setNextPhotoIndex();function t(){e._showPhoto(e.current)}e.flipped?e._rotateItem(t):t()}),t.prototype.setNextPhotoIndex=function(){this.items=[].slice.call(this.inner.querySelectorAll("figure:not([data-dummy])")),e.current=e.current<this.items.length-1?e.current+1:0},t.prototype.setPreviousPhotoIndex=function(){this.items=[].slice.call(this.inner.querySelectorAll("figure:not([data-dummy])")),e.current=0<e.current?e.current-1:this.items.length-1},t.prototype.startAutoPlay=function(){setInterval(function(){e.setNextPhotoIndex(),e._showPhoto(e.current)},4e3)},r.addEventListener("resize",function(){e._resizeHandler()})},t.prototype._resizeHandler=function(){var t=this;this._resizeTimeout&&clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout(function(){t._resize(),t._resizeTimeout=null},100)},t.prototype._resize=function(){function t(){e._shuffle(!0)}var e=this;this._getSizes(),this.started&&this.flipped?this._rotateItem(t):t()},t.prototype._showPhoto=function(t){if(this.isShuffling)return!1;this.isShuffling=!0,classie.hasClass(this.currentItem,"photostack-flip")&&this._removeItemPerspective(),classie.removeClass(this.currentItem,"photostack-current"),this.current=t,this.currentItem=this.items[this.current],this.currentItem.querySelector(".photostack-back"),this._shuffle()},t.prototype._shuffle=function(t){var u=t?1:this.currentItem.getAttribute("data-shuffle-iteration")||1;(u<=0||!this.started||this.openDefault)&&(u=1),this.openDefault&&(classie.addClass(this.currentItem,"photostack-flip"),this.openDefault=!1,this.isShuffling=!1);var p=.5,d=Math.ceil(this.sizes.inner.width/(this.sizes.item.width*p)),f=Math.ceil(this.sizes.inner.height/(this.sizes.item.height*p)),e=d*this.sizes.item.width*p+this.sizes.item.width/2-this.sizes.inner.width,i=f*this.sizes.item.height*p+this.sizes.item.height/2-this.sizes.inner.height,v=e/2,g=i/2,y=this,I=function(){--u;for(var o=[],t=0;t<f;++t)for(var e=o[t]=[],i=0;i<d;++i){var s=i*(y.sizes.item.width*p)-v,r=t*(y.sizes.item.height*p)-g,n=0,a=0;if(y.started&&0===u){var h=y._isOverlapping({x:s,y:r});if(h.overlapping)switch(n=h.noOverlap.x,a=h.noOverlap.y,Math.floor(3*Math.random())){case 0:n=0;break;case 1:a=0}}e[i]={x:s+n,y:r+a}}o=_(o);var c=0,l=0,m=0;y.allItems.forEach(function(t,e){c===d-1?(l=l===f-1?0:l+1,c=1):++c;Math.floor(Math.random()*d),Math.floor(Math.random()*f);var i=o[l][c-1],s=i.x,r=i.y,n=function(){++m,x&&this.removeEventListener(z,n),m===y.allItemsCount&&(0<u?I.call():(classie.addClass(y.currentItem,"photostack-flip"),y.isShuffling=!1,"function"==typeof y.options.callback&&y.options.callback(y.currentItem)))};y.items.indexOf(t)===y.current&&y.started&&0===u?(y.currentItem.style.WebkitTransform="translate("+y.centerItem.x+"px,"+y.centerItem.y+"px) rotate(0deg)",y.currentItem.style.msTransform="translate("+y.centerItem.x+"px,"+y.centerItem.y+"px) rotate(0deg)",y.currentItem.style.transform="translate("+y.centerItem.x+"px,"+y.centerItem.y+"px) rotate(0deg)",y.currentItem.querySelector(".photostack-back")&&y._addItemPerspective(),classie.addClass(y.currentItem,"photostack-current")):(t.style.WebkitTransform="translate("+s+"px,"+r+"px) rotate("+Math.floor(71*Math.random()-35)+"deg)",t.style.msTransform="translate("+s+"px,"+r+"px) rotate("+Math.floor(71*Math.random()-35)+"deg)",t.style.transform="translate("+s+"px,"+r+"px) rotate("+Math.floor(71*Math.random()-35)+"deg)"),y.started&&(x?t.addEventListener(z,n):n())})};I.call()},t.prototype._getSizes=function(){this.sizes={inner:{width:this.inner.offsetWidth,height:this.inner.offsetHeight},item:{width:this.currentItem.offsetWidth,height:this.currentItem.offsetHeight}},this.centerItem={x:this.sizes.inner.width/2-this.sizes.item.width/2,y:this.sizes.inner.height/2-this.sizes.item.height/2}},t.prototype._isOverlapping=function(t){var e=this.sizes.item.width+this.sizes.item.width/3,i=this.sizes.item.height+this.sizes.item.height/3,s=this.sizes.inner.width/2-e/2,r=this.sizes.inner.height/2-i/2,n=this.sizes.item.width,o=this.sizes.item.height;if(t.x+n<s||t.x>s+e||t.y+o<r||t.y>r+i)return{overlapping:!1};var a=Math.random()<.5,h=Math.floor(Math.random()*(n/4+1)),c=Math.floor(Math.random()*(o/4+1));return{overlapping:!0,noOverlap:{x:a?-1*(t.x-s+n)-h:s+e-(t.x+n)+n+h,y:a?-1*(t.y-r+o)-c:r+i-(t.y+o)+o+c}}},t.prototype._addItemPerspective=function(){classie.addClass(this.el,"photostack-perspective")},t.prototype._removeItemPerspective=function(){classie.removeClass(this.el,"photostack-perspective"),classie.removeClass(this.currentItem,"photostack-flip")},t.prototype._rotateItem=function(t){if(classie.hasClass(this.el,"photostack-perspective")&&!this.isRotating&&!this.isShuffling){this.isRotating=!0;var e=this,i=function(){x&&s&&this.removeEventListener(z,i),e.isRotating=!1,"function"==typeof t&&t()};this.flipped?s?(this.currentItem.style.WebkitTransform="translate("+this.centerItem.x+"px,"+this.centerItem.y+"px) rotateY(0deg)",this.currentItem.style.transform="translate("+this.centerItem.x+"px,"+this.centerItem.y+"px) rotateY(0deg)"):classie.removeClass(this.currentItem,"photostack-showback"):s?(this.currentItem.style.WebkitTransform="translate("+this.centerItem.x+"px,"+this.centerItem.y+"px) translate("+this.sizes.item.width+"px) rotateY(-179.9deg)",this.currentItem.style.transform="translate("+this.centerItem.x+"px,"+this.centerItem.y+"px) translate("+this.sizes.item.width+"px) rotateY(-179.9deg)"):classie.addClass(this.currentItem,"photostack-showback"),this.flipped=!this.flipped,x&&s?this.currentItem.addEventListener(z,i):i()}},r.Photostack=t}(window);
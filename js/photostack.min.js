/*!
 * Start Bootstrap - Grayscale v5.0.9 (https://startbootstrap.com/template-overviews/grayscale)
 * Copyright 2013-2019 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-grayscale/blob/master/LICENSE)
 */

!function(t){"use strict";Modernizr.addTest("csstransformspreserve3d",function(){var e,i=Modernizr.prefixed("transformStyle"),s="preserve-3d";return!!i&&(i=i.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()}).replace(/^ms-/,"-ms-"),Modernizr.testStyles("#modernizr{"+i+":"+s+";}",function(s,r){e=t.getComputedStyle?getComputedStyle(s,null).getPropertyValue(i):""}),e===s)});var e=Modernizr.csstransitions,i=Modernizr.csstransformspreserve3d,s={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"}[Modernizr.prefixed("transition")];function r(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function n(t){for(var e=[],i=t.length,s=t[0].length,r=0;r<i;r++)e=e.concat(t[r]);e=function(t){var e,i,s=t.length;for(;s;)i=Math.floor(Math.random()*s--),e=t[s],t[s]=t[i],t[i]=e;return t}(e);for(var n=[],o=0,a=0;a<i;a++){for(var h=[],l=0;l<s;l++)h.push(e[o]),o++;n.push(h)}return n}function o(t,e){this.el=t,this.inner=this.el.querySelector("div"),this.allItems=[].slice.call(this.inner.children),this.allItemsCount=this.allItems.length,this.allItemsCount&&(this.items=[].slice.call(this.inner.querySelectorAll("figure:not([data-dummy])")),this.itemsCount=this.items.length,this.current=0,this.options=r({},this.options),r(this.options,e),this._init())}o.prototype.options={},o.prototype._init=function(){this.currentItem=this.items[this.current],this._addNavigation(),this._getSizes(),this._initEvents()},o.prototype._addNavigation=function(){this.div1=document.createElement("div"),classie.addClass(this.div1,"leftNavDiv"),this.div2=document.createElement("div"),classie.addClass(this.div2,"rightNavDiv");this.div1.innerHTML='<i id="leftNav" class="fas fa-arrow-left"></i>',this.div2.innerHTML='<i id="rightNav" class="fas fa-arrow-right"></i>',this.el.appendChild(this.div1),this.el.appendChild(this.div2)},o.prototype._initEvents=function(){var i=this,s=classie.hasClass(this.el,"photostack-start"),r=function(){var t=function(){e&&classie.addClass(i.el,"photostack-transition")};s?(this.removeEventListener("click",r),classie.removeClass(i.el,"photostack-start"),t()):(i.openDefault=!0,setTimeout(t,25)),i.started=!0,i._showPhoto(i.current),i.startAutoPlay()};s?(this._shuffle(),this.el.addEventListener("click",r)):r(),document.getElementById("leftNav").addEventListener("click",function(){clearInterval(i.interval),i.setPreviousPhotoIndex(),i._showPhoto(i.current),i.startAutoPlay()}),document.getElementById("rightNav").addEventListener("click",function(){clearInterval(i.interval),i.setNextPhotoIndex(),i._showPhoto(i.current),i.startAutoPlay()}),o.prototype.rotatePolaroid=function(){clearInterval(i.interval),i._rotateItem(),i.startAutoPlay()},o.prototype.setNextPhotoIndex=function(){this.items=[].slice.call(this.inner.querySelectorAll("figure:not([data-dummy])")),i.current=i.current<this.items.length-1?i.current+1:0},o.prototype.setPreviousPhotoIndex=function(){this.items=[].slice.call(this.inner.querySelectorAll("figure:not([data-dummy])")),i.current=i.current>0?i.current-1:this.items.length-1},o.prototype.startAutoPlay=function(){clearInterval(i.interval),i.interval=setInterval(function(){i.setNextPhotoIndex(),i._showPhoto(i.current)},7e3)},t.addEventListener("resize",function(){i._resizeHandler()})},o.prototype._resizeHandler=function(){var t=this;this._resizeTimeout&&clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout(function(){t._resize(),t._resizeTimeout=null},100)},o.prototype._resize=function(){var t=this,e=function(){t._shuffle(!0)};this._getSizes(),this.started&&this.flipped?this._rotateItem(e):e()},o.prototype._showPhoto=function(t){if(this.isShuffling)return!1;this.isShuffling=!0,classie.hasClass(this.currentItem,"photostack-flip")&&this._removeItemPerspective(),classie.removeClass(this.currentItem,"photostack-current"),this.current=t,this.currentItem=this.items[this.current],this._shuffle()},o.prototype._shuffle=function(t){var i=t?1:this.currentItem.getAttribute("data-shuffle-iteration")||1;(i<=0||!this.started||this.openDefault)&&(i=1),this.openDefault&&(classie.addClass(this.currentItem,"photostack-flip"),this.openDefault=!1,this.isShuffling=!1);var r=Math.ceil(this.sizes.inner.width/(.5*this.sizes.item.width)),o=Math.ceil(this.sizes.inner.height/(.5*this.sizes.item.height)),a=r*this.sizes.item.width*.5+this.sizes.item.width/2-this.sizes.inner.width,h=o*this.sizes.item.height*.5+this.sizes.item.height/2-this.sizes.inner.height,l=a/2,c=h/2,d=this,m=function(){--i;for(var t=[],a=0;a<o;++a)for(var h=t[a]=[],u=0;u<r;++u){var p=u*(.5*d.sizes.item.width)-l,f=a*(.5*d.sizes.item.height)-c,v=0,y=0;if(d.started&&0===i){var g=d._isOverlapping({x:p,y:f});if(g.overlapping)switch(v=g.noOverlap.x,y=g.noOverlap.y,Math.floor(3*Math.random())){case 0:v=0;break;case 1:y=0}}h[u]={x:p+v,y:f+y}}t=n(t);var I=0,x=0,z=0;d.allItems.forEach(function(n,a){I===r-1?(x=x===o-1?0:x+1,I=1):++I;Math.floor(Math.random()*r),Math.floor(Math.random()*o);var h=t[x][I-1],l=h.x,c=h.y,u=function(){++z,e&&this.removeEventListener(s,u),z===d.allItemsCount&&(i>0?m.call():(classie.addClass(d.currentItem,"photostack-flip"),d.isShuffling=!1,"function"==typeof d.options.callback&&d.options.callback(d.currentItem)))};d.items.indexOf(n)===d.current&&d.started&&0===i?(d.currentItem.style.WebkitTransform="translate("+d.centerItem.x+"px,"+d.centerItem.y+"px) rotate(0deg)",d.currentItem.style.msTransform="translate("+d.centerItem.x+"px,"+d.centerItem.y+"px) rotate(0deg)",d.currentItem.style.transform="translate("+d.centerItem.x+"px,"+d.centerItem.y+"px) rotate(0deg)",d.currentItem.querySelector(".photostack-back")&&d._addItemPerspective(),classie.addClass(d.currentItem,"photostack-current")):(n.style.WebkitTransform="translate("+l+"px,"+c+"px) rotate("+Math.floor(71*Math.random()-35)+"deg)",n.style.msTransform="translate("+l+"px,"+c+"px) rotate("+Math.floor(71*Math.random()-35)+"deg)",n.style.transform="translate("+l+"px,"+c+"px) rotate("+Math.floor(71*Math.random()-35)+"deg)"),d.started&&(e?n.addEventListener(s,u):u())})};m.call()},o.prototype._getSizes=function(){this.sizes={inner:{width:this.inner.offsetWidth,height:this.inner.offsetHeight},item:{width:this.currentItem.offsetWidth,height:this.currentItem.offsetHeight}},this.centerItem={x:this.sizes.inner.width/2-this.sizes.item.width/2,y:this.sizes.inner.height/2-this.sizes.item.height/2}},o.prototype._isOverlapping=function(t){var e=this.sizes.item.width+this.sizes.item.width/3,i=this.sizes.item.height+this.sizes.item.height/3,s=this.sizes.inner.width/2-e/2,r=this.sizes.inner.height/2-i/2,n=this.sizes.item.width,o=this.sizes.item.height;if(!(t.x+n<s||t.x>s+e||t.y+o<r||t.y>r+i)){var a=Math.random()<.5,h=Math.floor(Math.random()*(n/4+1)),l=Math.floor(Math.random()*(o/4+1));return{overlapping:!0,noOverlap:{x:a?-1*(t.x-s+n)-h:s+e-(t.x+n)+n+h,y:a?-1*(t.y-r+o)-l:r+i-(t.y+o)+o+l}}}return{overlapping:!1}},o.prototype._addItemPerspective=function(){classie.addClass(this.el,"photostack-perspective")},o.prototype._removeItemPerspective=function(){classie.removeClass(this.el,"photostack-perspective"),classie.removeClass(this.currentItem,"photostack-flip")},o.prototype._rotateItem=function(t){if(classie.hasClass(this.el,"photostack-perspective")&&!this.isRotating&&!this.isShuffling){this.isRotating=!0;var r=this,n=function(){e&&i&&this.removeEventListener(s,n),r.isRotating=!1,"function"==typeof t&&t()};this.flipped?i?(this.currentItem.style.WebkitTransform="translate("+this.centerItem.x+"px,"+this.centerItem.y+"px) rotateY(0deg)",this.currentItem.style.transform="translate("+this.centerItem.x+"px,"+this.centerItem.y+"px) rotateY(0deg)"):classie.removeClass(this.currentItem,"photostack-showback"):i?(this.currentItem.style.WebkitTransform="translate("+this.centerItem.x+"px,"+this.centerItem.y+"px) translate("+this.sizes.item.width+"px) rotateY(-179.9deg)",this.currentItem.style.transform="translate("+this.centerItem.x+"px,"+this.centerItem.y+"px) translate("+this.sizes.item.width+"px) rotateY(-179.9deg)"):classie.addClass(this.currentItem,"photostack-showback"),this.flipped=!this.flipped,e&&i?this.currentItem.addEventListener(s,n):n()}},t.Photostack=o}(window);